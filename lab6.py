import numpy as np

def f(x):
    return 1/np.abs(4 - 3*np.sin(x/2))

def rect(a,b,m):
    h = (b-a)/m
    x = a + h*(np.arange(m)+0.5)
    return h*np.sum(f(x))

def gauss(a,b,m):
    if m==5:
        t = np.array([0.046910077,0.230765345,0.5,1-0.230765345,1-0.046910077])
        A = np.array([0.118463443,0.239314335,0.284444444,0.239314335,0.118463443])
    elif m==7:
        t = np.array([0.025446044,0.129234407,0.297077424,0.5,1-0.297077424,1-0.129234407,1-0.025446044])
        A = np.array([0.064742483,0.139852696,0.190915025,0.208979592,0.190915025,0.139852696,0.064742483])
    elif m==9:
        t = np.array([0.015919880,0.081934446,0.193314284,0.337873288,0.5,
                      1-0.337873288,1-0.193314284,1-0.081934446,1-0.015919880])
        A = np.array([0.040637194,0.090324080,0.130305348,0.156173539,0.165119678,
                      0.156173539,0.130305348,0.090324080,0.040637194])
    elif m==11:
        t = np.array([0.010885671,0.056468700,0.134923997,0.240451935,0.365228422,
                      0.5,
                      1-0.365228422,1-0.240451935,1-0.134923997,1-0.056468700,1-0.010885671])
        A = np.array([0.027834284,0.062790185,0.093145105,0.116596882,0.131402272,
                      0.136462543,
                      0.131402272,0.116596882,0.093145105,0.062790185,0.027834284])
    x = a + (b-a)*t
    return (b-a)*np.sum(A*f(x))

a = 0
b = np.pi

for m in range(5,101):
    I_rect = rect(a,b,m)
    print("rect", m, I_rect)

for m in [5,7,9,11]:
    I_gauss = gauss(a,b,m)
    print("gauss", m, I_gauss)
